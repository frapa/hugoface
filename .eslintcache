[{"/home/francesco/Projects/javascript/oguh/src/index.js":"1","/home/francesco/Projects/javascript/oguh/src/services/login.js":"2","/home/francesco/Projects/javascript/oguh/src/components/Admin/Admin.js":"3","/home/francesco/Projects/javascript/oguh/src/components/Login/Login.js":"4","/home/francesco/Projects/javascript/oguh/src/components/Articles/Articles.js":"5","/home/francesco/Projects/javascript/oguh/src/components/Editor/Editor.js":"6","/home/francesco/Projects/javascript/oguh/src/services/git.js":"7","/home/francesco/Projects/javascript/oguh/src/services/articles.js":"8","/home/francesco/Projects/javascript/oguh/src/services/fs.js":"9"},{"size":1494,"mtime":1607871835649,"results":"10","hashOfConfig":"11"},{"size":427,"mtime":1607788490022,"results":"12","hashOfConfig":"11"},{"size":1055,"mtime":1607799031656,"results":"13","hashOfConfig":"11"},{"size":2459,"mtime":1607792498209,"results":"14","hashOfConfig":"11"},{"size":1601,"mtime":1607871835649,"results":"15","hashOfConfig":"11"},{"size":2151,"mtime":1607871835649,"results":"16","hashOfConfig":"11"},{"size":598,"mtime":1607793355220,"results":"17","hashOfConfig":"11"},{"size":2014,"mtime":1607871835649,"results":"18","hashOfConfig":"11"},{"size":130,"mtime":1607785017744,"results":"19","hashOfConfig":"11"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},"183kgl1",{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"27","usedDeprecatedRules":"22"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"34","usedDeprecatedRules":"22"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"22"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/francesco/Projects/javascript/oguh/src/index.js",[],["42","43"],"/home/francesco/Projects/javascript/oguh/src/services/login.js",[],"/home/francesco/Projects/javascript/oguh/src/components/Admin/Admin.js",["44"],"import { useHistory, Link } from \"react-router-dom\";\n\nimport \"./Admin.css\";\nimport logo from \"../../logo.svg\";\nimport { logOut } from \"../../services/login\";\n\nexport default function Admin({ children }) {\n  const history = useHistory();\n\n  function triggerLogout() {\n    logOut();\n    history.push(\"/login\");\n  }\n\n  return (\n    <div className=\"app\">\n      <nav className=\"sidebar has-background-light\">\n        <div className=\"logo\">\n          <img src={logo} alt=\"Hugoface\" />\n        </div>\n\n        <div className=\"menu\">\n          <div>\n            <Link to=\"/dashboard\">Dashboard</Link>\n          </div>\n          <div>\n            <Link to=\"/articles\">Articles</Link>\n          </div>\n          <div>\n            <Link to=\"/pages\">Pages</Link>\n          </div>\n        </div>\n\n        <div className=\"user\">\n          <a href=\"#\" onClick={() => triggerLogout()}>\n            Logout\n          </a>\n        </div>\n      </nav>\n\n      <div className=\"page section\">\n        <main className=\"container\">{children}</main>\n      </div>\n    </div>\n  );\n}\n","/home/francesco/Projects/javascript/oguh/src/components/Login/Login.js",[],"/home/francesco/Projects/javascript/oguh/src/components/Articles/Articles.js",[],"/home/francesco/Projects/javascript/oguh/src/components/Editor/Editor.js",["45","46","47","48"],"import { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport fromMarkdown from \"mdast-util-from-markdown\";\n\nimport \"./Editor.css\";\nimport { getArticle } from \"../../services/articles\";\n\nfunction escapeHtml(unsafe) {\n  return unsafe\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&#039;\");\n}\n\nfunction toMarkdown(tree) {\n  let markdown = \"\";\n  for (const child of tree.children) {\n    if (child.type == \"heading\") {\n      const prefix = \"#\".repeat(child.depth);\n      const title = toMarkdown(child);\n      markdown += `<div class=\"title is-${\n        child.depth + 2\n      }\">${prefix} ${title}</div><br />\\n`;\n    } else if (child.type == \"text\") {\n      markdown += escapeHtml(child.value);\n    } else if (child.type == \"paragraph\") {\n      markdown += toMarkdown(child);\n    }\n  }\n  return markdown;\n}\n\nfunction toEditorHtml(tree) {\n  console.log(tree);\n\n  const markdown = toMarkdown(tree);\n  return markdown;\n\n  // let editorHtml = escapeHtml(markdown);\n\n  // editorHtml = editorHtml.replace(/\\r/g, \"\").replace(/\\n/g, \"<br />\\n\");\n  // editorHtml = editorHtml.replace(\n  //   /^(#+.*)$/gm,\n  //   '<div class=\"title is-4\">$1</div>'\n  // );\n\n  // return editorHtml;\n}\n\nexport default function Editor() {\n  const { filename } = useParams();\n\n  const [article, setArticle] = useState([]);\n  const [tree, setTree] = useState(null);\n\n  useEffect(() => {\n    (async () => {\n      const article = await getArticle(filename);\n      setArticle(article);\n      if (article.body) {\n        setTree(fromMarkdown(article.body));\n      }\n    })();\n  }, []);\n\n  if (!article) return <div></div>;\n\n  return (\n    <div>\n      <h1 className=\"title is-4\">{article.title}</h1>\n      <div>{article.slug}</div>\n      <div>\n        <div\n          dangerouslySetInnerHTML={{\n            __html: tree ? toEditorHtml(tree) : \"\",\n          }}\n          contentEditable={true}\n          // TODO: other events such as paste, keyup and blur\n          onInput={(event) => console.log(event.target.innerHTML)}\n        ></div>\n      </div>\n    </div>\n  );\n}\n","/home/francesco/Projects/javascript/oguh/src/services/git.js",[],"/home/francesco/Projects/javascript/oguh/src/services/articles.js",["49","50"],"import yaml from \"yaml\";\nimport toml from \"toml\";\n\nimport { pfs } from \"./fs\";\nimport { DIR } from \"./git\";\n\n// TODO: change this or make configurable\nconst ARTICLE_DIR = DIR + \"/content/post/\";\n\nfunction split(str, separator, limit) {\n  const parts = str.split(separator);\n  return [...parts.slice(0, limit), parts.slice(limit).join(separator)];\n}\n\nfunction parseArticle(filename, content) {\n  // TODO: support all front matter formats\n  content = content.trim();\n  let fields, body;\n  if (content.slice(0, 3) === \"---\") {\n    // YAML front matter\n    const [_, header, articleBody] = split(content, \"---\", 2);\n    fields = yaml.parse(header);\n    body = articleBody;\n  } else if (content.slice(0, 3) === \"+++\") {\n    // TOML front matter\n    const [_, header, articleBody] = split(content, \"+++\", 2);\n    fields = toml.parse(header);\n    body = articleBody;\n  } else if (content.slice(0, 2) === \"#+\") {\n    // ORG MODE front matter\n    throw new Error(\"Org mode front matter is not supported yet\");\n  } else if (content[0] === \"{\") {\n    // JSON front matter\n    throw new Error(\"JSON front matter is not supported yet\");\n  } else {\n    throw new Error(`Invalid front matter in file '${filename}'`);\n  }\n\n  if (fields.hasOwnProperty(\"date\")) {\n    fields[\"date\"] = new Date(fields[\"date\"]);\n  }\n\n  return {\n    filename,\n    ...fields,\n    body,\n  };\n}\n\nexport async function listArticles() {\n  // TODO: pagination\n  let files;\n  try {\n    files = await pfs.readdir(ARTICLE_DIR);\n  } catch {\n    return [];\n  }\n\n  const filesContent = await Promise.all(\n    files.map((filename) => pfs.readFile(ARTICLE_DIR + filename))\n  );\n\n  return filesContent.map((byteContent, i) => {\n    const content = new TextDecoder(\"utf-8\").decode(byteContent);\n    return parseArticle(files[i], content);\n  });\n}\n\nexport async function getArticle(filename) {\n  const byteContent = await pfs.readFile(ARTICLE_DIR + filename);\n  const content = new TextDecoder(\"utf-8\").decode(byteContent);\n  return parseArticle(filename, content);\n}\n","/home/francesco/Projects/javascript/oguh/src/services/fs.js",[],{"ruleId":"51","replacedBy":"52"},{"ruleId":"53","replacedBy":"54"},{"ruleId":"55","severity":1,"message":"56","line":35,"column":11,"nodeType":"57","endLine":35,"endColumn":55},{"ruleId":"58","severity":1,"message":"59","line":20,"column":20,"nodeType":"60","messageId":"61","endLine":20,"endColumn":22},{"ruleId":"58","severity":1,"message":"59","line":26,"column":27,"nodeType":"60","messageId":"61","endLine":26,"endColumn":29},{"ruleId":"58","severity":1,"message":"59","line":28,"column":27,"nodeType":"60","messageId":"61","endLine":28,"endColumn":29},{"ruleId":"62","severity":1,"message":"63","line":66,"column":6,"nodeType":"64","endLine":66,"endColumn":8,"suggestions":"65"},{"ruleId":"66","severity":1,"message":"67","line":21,"column":12,"nodeType":"68","messageId":"69","endLine":21,"endColumn":13},{"ruleId":"66","severity":1,"message":"67","line":26,"column":12,"nodeType":"68","messageId":"69","endLine":26,"endColumn":13},"no-native-reassign",["70"],"no-negated-in-lhs",["71"],"jsx-a11y/anchor-is-valid","The href attribute requires a valid value to be accessible. Provide a valid, navigable address as the href value. If you cannot provide a valid href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'filename'. Either include it or remove the dependency array.","ArrayExpression",["72"],"no-unused-vars","'_' is assigned a value but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation",{"desc":"73","fix":"74"},"Update the dependencies array to be: [filename]",{"range":"75","text":"76"},[1665,1667],"[filename]"]